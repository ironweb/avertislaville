<header class="navBar">
  <h1>Localisation</h1>
</header>
<%= simple_form_for(@request, url: request_path(@request.service)) do |form| %>
  <button id="enlarge" type="button">enlarge</button>
  <button id="minimize" type="button">minimize</button>
  <div id="map_canvas"></div>
  <div class="service-attributes">
    <div class="navBar">
      <h2><%= t('requests.information') %></h2>
    </div>
    <fieldset>
      <legend class="visuallyhidden"><%= t('requests.information') %></legend>
      <% @request.service.ordered_attrs.each do |code, attr| %>
        <%= form.input attr.code.to_sym,
          :label => attr.description,
          :placeholder => attr.description,
          :as => "open311_#{attr.datatype}",
          :collection => attr.values,
          :label_method => lambda { |v| v['name'] },
          :value_method => lambda { |v| v['key'] },
          :required => attr.required,
          :input_html => { value: nil } %>
      <% end %>
    </fieldset>
  </div>
  <div class="navBar">
    <h2><%= t('requests.contact') %></h2>
  </div>
  <fieldset>
    <legend class="visuallyhidden"><%= t('requests.contact') %></legend>
    <%= form.input :firstname, :placeholder => t('requests.firstname') %>
    <%= form.input :name, :placeholder => t('requests.lastname') %>
    <%= form.input :email, :placeholder => t('requests.email') %>
    <%= form.input :phone, :placeholder => t('requests.phone') %>
  </fieldset>
  <div class="formSeparator">
    <h2><%= t('requests.membership') %></h2>
  </div>
  <fieldset>
    <%= form.input :password, :placeholder => t('requests.password') %>
  </fieldset>
  <%= form.submit :value => t('requests.register'), :class => 'navBar' %>
<% end %>
